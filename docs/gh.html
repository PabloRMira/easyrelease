---

title: gh


keywords: fastai
sidebar: home_sidebar

summary: "Tools for GitHub releases"
description: "Tools for GitHub releases"
nb_path: "nbs/00_gh.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_gh.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_repo_name" class="doc_header"><code>get_repo_name</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_repo_name</code>(<strong><code>git_url</code></strong>)</p>
</blockquote>
<p>Get repo name out of <code>git_url</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">get_repo_name</span><span class="p">(</span><span class="s2">&quot;https://github.com/PabloRMira/easyrelease&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;PabloRMira/easyrelease&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">get_repo_name</span><span class="p">(</span><span class="s2">&quot;https://github.com/PabloRMira/easyrelease/tree/main&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;PabloRMira/easyrelease&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">get_repo_name</span><span class="p">(</span><span class="s2">&quot;https://github.enterprise.com/PabloRMira/easyrelease/tree/main&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;PabloRMira/easyrelease&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_base_repo_url" class="doc_header"><code>get_base_repo_url</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_base_repo_url</code>(<strong><code>git_url</code></strong>)</p>
</blockquote>
<p>Get base repo URL from <code>git_url</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">get_base_repo_url</span><span class="p">(</span><span class="s2">&quot;https://github.com/PabloRMira/easyrelease&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;https://github.com/PabloRMira/easyrelease&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">(</span>
    <span class="n">get_base_repo_url</span><span class="p">(</span>
        <span class="s2">&quot;https://github.com/PabloRMira/easyrelease/tree/main&quot;</span>
    <span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;https://github.com/PabloRMira/easyrelease&quot;</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_gh_template" class="doc_header"><code>write_gh_template</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_gh_template</code>()</p>
</blockquote>
<p>Write GitHub template for assigning commit messages to categories</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_last_tag" class="doc_header"><code>get_last_tag</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L56" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_last_tag</code>()</p>
</blockquote>
<p>Get last git tag. If there is no tag, then it outputs the first commit hash</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_commit_msgs" class="doc_header"><code>get_commit_msgs</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L74" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_commit_msgs</code>(<strong><code>from_tag</code></strong>=<em><code>None</code></em>, <strong><code>to</code></strong>=<em><code>'HEAD'</code></em>)</p>
</blockquote>
<p>Get commits <code>from_tag</code> to <code>to</code>. If <code>from_tag</code> is None then it will get the commits from latest tag</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="add_pull_request_link" class="doc_header"><code>add_pull_request_link</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L82" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>add_pull_request_link</code>(<strong><code>msg</code></strong>)</p>
</blockquote>
<p>Add pull request link to commit message <code>s</code> if reference is found, e.g. #100</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">check_git_dir</span><span class="p">():</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">)</span>  <span class="c1"># we need this if we test locally in the notebook itself</span>
<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;* [FIX] Some bug (#100)&quot;</span>
<span class="n">msg_link</span> <span class="o">=</span> <span class="n">add_pull_request_link</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">expected_msg_link</span> <span class="o">=</span> <span class="s2">&quot;* [FIX] Some bug ([#100](https://github.com/PabloRMira/easyrelease/pull/100))&quot;</span>
<span class="k">assert</span> <span class="n">msg_link</span> <span class="o">==</span> <span class="n">expected_msg_link</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="release_report" class="doc_header"><code>release_report</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>release_report</code>(<strong><code>gh_config</code></strong>, <strong><code>commit_msgs</code></strong>, <strong><code>report_title</code></strong>=<em><code>''</code></em>)</p>
</blockquote>
<p>Get release report using <code>report_title</code>, commit messages <code>commit_msgs</code> and GitHub config <code>gh_config</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">check_git_dir</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">)</span>  <span class="c1"># we need this if we test locally in the notebook itself</span>
<span class="n">commit_msgs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;[FIX] Some bug&quot;</span><span class="p">,</span>
    <span class="s2">&quot;[FEA] My new feature&quot;</span>
<span class="p">]</span>
<span class="n">gh_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gh_categories&quot;</span><span class="p">:</span> 
             <span class="p">[{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Bugfixes:&quot;</span><span class="p">,</span> <span class="s2">&quot;keyword&quot;</span><span class="p">:</span> <span class="s2">&quot;[FIX]&quot;</span><span class="p">},</span>
              <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;New features:&quot;</span><span class="p">,</span> <span class="s2">&quot;keyword&quot;</span><span class="p">:</span> <span class="s2">&quot;[FEA]&quot;</span><span class="p">}]}</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">release_report</span><span class="p">(</span><span class="n">gh_config</span><span class="p">,</span> <span class="n">commit_msgs</span><span class="p">,</span> <span class="s2">&quot;Nice title!&quot;</span><span class="p">)</span>
<span class="n">expected_report</span> <span class="o">=</span> <span class="s2">&quot;Nice title!</span><span class="se">\n\n</span><span class="s2">Bugfixes:</span><span class="se">\n</span><span class="s2">* [FIX] Some bug</span><span class="se">\n\n</span><span class="s2">New features:</span><span class="se">\n</span><span class="s2">* [FEA] New features&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_gh_credentials" class="doc_header"><code>get_gh_credentials</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L106" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_gh_credentials</code>()</p>
</blockquote>
<p>Get GitHub credentials from file .gh-credentials</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_tags" class="doc_header"><code>get_tags</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_tags</code>()</p>
</blockquote>
<p>Get git tags as list</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_gh_config" class="doc_header"><code>get_gh_config</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L123" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_gh_config</code>()</p>
</blockquote>
<p>Get GitHub config</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_gh_release" class="doc_header"><code>make_gh_release</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L131" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_gh_release</code>(<strong><code>draft</code></strong>=<em><code>False</code></em>, <strong><code>prerelease</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Make a GitHub release. Indicate if there is a <code>draft</code> or a <code>prerelease</code> with default False both</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_changelog" class="doc_header"><code>make_changelog</code><a href="https://github.com/PabloRMira/easyrelease/tree/main/easyrelease/gh.py#L165" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_changelog</code>()</p>
</blockquote>
<p>Generate CHANGELOG.md file with release notes</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

